#include "stm32f10x.h"
unsigned int i;
unsigned int j;
int main()
RCC->APB2ENR | = RCC_APB2ENR_IOPAEN;
RCC->APB1ENR |= RCC APB1ENR TIM2EN;
GPIOD->CRL |= GPIO CRL MODE2;
GPIOD->CRL &=~ GPIO_CRL_CNF2_0;
GPIOD->CRL | = GPIO_CRL_CNF2_1;
TIM4->PSC = 0x00A7; //????????????
TIM4->ARR = 0x0FFF; //Auto Reload Register
TIM4->CCR3 = 0xFFFF; //???????????? ????????
TIM4->CCMR2 | = TIM CCMR2 OC3M_1|TIM_CCMR2_OC3M_2; //110-PWM mode 1
TIM4->CKER |= TIM_CAR_CC 3E; //????? ?????? ???????/????????? ???????
TIM4->CR1 |= TIM_CR1_CEN; //????? ????? ???????
while (1)
for (i=0;i<0xFFFF; i++)
TIM4->CCR3 = i; for (j=0;j<0x100000;j++);